import { Version } from "version.slint";
import { Theme } from "theme.slint";
import { Layout } from "layout.slint";
import { Configuration } from "configuration.slint";
import { ModelState } from "state.slint";
import { Page } from "navigation/index.slint";
import { MainMenuBar } from "menubar/index.slint";
import { HomePage, SplashPage } from "pages/index.slint";

export { ModelState }

export component AppWindow inherits Window {
  in-out property<Page> page: Page.Splash;

  title: Version.name;

  default-font-size: Theme.default-font-size;

  preferred-width: Layout.preferred-window-width;
  preferred-height: Layout.preferred-window-height;
  
  Timer {
    interval: Configuration.splash-page-duration;
    running: true;
    triggered() => {
        page = Page.Home;
        self.running = false;
    }
  }

  VerticalLayout { // Required to maintain implicit sizes.
    if (page != Page.Splash): MainMenuBar { z: 1; }

    if (page == Page.Splash): SplashPage {}

    if (page == Page.Home): HomePage {}
  }
}
